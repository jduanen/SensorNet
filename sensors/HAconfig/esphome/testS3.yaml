substitutions:
  devicename: tests3
  upper_devicename: TestS3

esphome:
  name: ${devicename}
  friendly_name: ${upper_devicename}
  platformio_options:
    board_build.flash_mode: dio
    board_build.mcu: esp32s3

esp32:
  board: seeed_xiao_esp32s3
  variant: esp32s3
  framework:
    type: arduino  #esp-idf

# Enable logging
logger:
  level: VERBOSE

# Enable Home Assistant API
api:
  encryption:
    key: !secret api_encryption_key

ota:
  - platform: esphome
    password: !secret ota_password

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password
  ap:
    ssid: "${upper_devicename} Fallback Hotspot"
    password: !secret wifi_ap_password
  power_save_mode: none

captive_portal:

web_server:
  port: 80

text_sensor:
  - platform: wifi_info
    ip_address:
      id: ip_address
      name: "Device IP Address"
  - platform: homeassistant
    entity_id: ota.status
    name: "OTA Status"
  - platform: version
    id: firmware_version
    name: "Firmware Version"

time:
  - platform: homeassistant
    id: esptime

i2c:
  id: i2cBus
  sda: GPIO5
  scl: GPIO6
  scan: true
  frequency: 50kHz  #### 50kHz 100kHz, 400kHz

sensor:
  - platform: scd4x  # SCD41/SCD40 supported by scd4x platform
    i2c_id: i2cBus
    address: 0x62
    co2:
      name: "Home CO2"
    temperature:
      name: "Home Temperature"
    humidity:
      name: "Home Humidity"
    measurement_mode: periodic
    update_interval: 60s

#i2s_audio:
#  - id: i2s_in
#    i2s_lrclk_pin: GPIO2 #WS
#    i2s_bclk_pin: GPIO3 #SCK

#microphone:
#  - platform: i2s_audio
#    id: external_mic
#    i2s_audio_id: i2s_in
#    adc_type: external
#    i2s_din_pin: GPIO4
#    pdm: false
#    bits_per_sample: 32bit
#    channel: left

